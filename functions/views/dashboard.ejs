<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Online Pomodoro Timer - eTomato note, stats and music </title>
    <meta name="description" content="eTomato is an online pomodoro timer
            integrated with notepad and lofi music - providing an efficient vibe
            to boost your study and work. See your study stats and evaluate your
            time spent. Check out fellowâ€™s notes and inspire each other.">
    <link rel="shortcut icon" href="./public/image/tomato.png" type="image/x-icon">
    <!-- Bootstrap , fonts & icons  -->
    <link type="text/css" rel="stylesheet" href="./public/toast/themes/toasteur-default.min.css">
    <link rel="stylesheet" href='./public/css/bootstrap.min.css'>
    <link rel="stylesheet" href="./public/css/clock.css">
    <link rel="stylesheet" href="./public/css/toggle.css">
    <link rel="stylesheet" href="./public/css/todo.css">
    <link rel="stylesheet" href="./public/css/feedback.css">
    <link rel="stylesheet" href="./public/fonts/icon-font/css/style.css">
    <link rel="stylesheet" href="./public/fonts/typography-font/typo.css">
    <link rel="stylesheet" href="./public/fonts/fontawesome-5/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./public/css/circle.css">
    <link rel="stylesheet" type="text/css" href="./public/css/demo.css">
    <link rel="stylesheet" type="text/css" href="./public/css/simplecircle.css">
    <link rel="stylesheet" href="./public/plugins/aos/aos.min.css">
    <link rel="stylesheet" href="./public/css/main.css">
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css">
    <link type="text/css" rel="stylesheet" href="./public/css/music.css">
    <link href="./public/summernote/summernote.min.css" rel="stylesheet">

    <!-- Share -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>


    <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>

    <script src="./public/js/popper.min.js"></script>
    <script src="./public/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
</head>

<body data-theme-mode-panel-active data-theme="light" style="font-family:
        'Mazzard H';" onload="onLoad();">

    <div id="header">
        <div class="row position-relative justify-content-center">
            <div class="float-container" id="heading-text-icon">
                <div class="float-child" id="title-icon">
                    <img src="./public/image/tomato.png" width="60px" alt="">
                </div>
                <div class="float-child" id="title-text">eTomato</div>
            </div>
        </div>
        <div class="dropdown" id="settings">
            <a href="#" id="dropdownMenuButton" data-bs-toggle="dropdown">
                <img id="settingImg" src="<%=profileUrl%>" width="40px" height="40px" alt="Avatar">
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#feedbackModal" data-bs-toggle="modal">Feedback</a>
                <a class="dropdown-item" href="#statsModal" data-bs-toggle="modal">Stats</a>
                <a class="dropdown-item" href="#logoutModal" data-bs-toggle="modal">Logout</a>
            </div>
        </div>
    </div>

    <!--Division for Modal-->
    <div id="feedbackModal" class="modal fade" role="dialog" data-bs-backdrop="static" data-bs-keyboard="false"
        aria-labelledby="feedbackTitle">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="feedbackTitle">How would you feel if you could no longer use</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <h4><strong>eTomato.online</strong>?</h4>
                    <hr id="feedbackHr">
                </div>
                <div class="form-check mb-4">
                    <input name="feedback" type="radio" class="feedback_opt" id="feedback_opt_1" value="1">
                    <label class="ml-3" for="feedback_opt_1">Very disappointed</label>
                </div>
                <div class="form-check mb-4">
                    <input name="feedback" type="radio" class="feedback_opt" id="feedback_opt_2" value="2">
                    <label class="ml-3" for="feedback_opt_2">Somewhat disappointed</label>
                </div>
                <div class="form-check mb-4">
                    <input name="feedback" type="radio" class="feedback_opt" id="feedback_opt_3" value="3">
                    <label class="ml-3" for="feedback_opt_3">Not disappointed</label>
                </div>
                <div class="form-check mb-4">
                    <input name="feedback" type="radio" class="feedback_opt" id="feedback_opt_4" value="4">
                    <label class="ml-3" for="feedback_opt_4">N/A</label>
                </div>
                <div class="text-center">
                    <h5>What could we improve?</h5>
                    <hr id="feedbackHr">
                </div>
                <textarea type="textarea" placeholder="Your Message" rows="3" id="feedbackMsg"></textarea>
                <div class="modal-footer">
                    <a href="" class="btn btn-primary" onclick="SendFeedback();">Send
                        <i class="fa fa-paper-plane"></i>
                    </a>
                    <a href="" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancel</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal stopTomato -->
    <div class="modal fade" id="stopTomatoModal" tabindex="-1" aria-labelledby="stopLableModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="stopLableModalLabel">Stop the current tomato?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Do not worry: The next Pomodoro will go better. Be gentle with yourself.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <script type="module" src="./public/js/circle.js"></script>
                    <button onclick="StopTomato()" type="button" class="btn btn-danger px-4" data-ds-dismiss="modal"
                        id="modalClose2">Yes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Logout</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you going to logout?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" onclick="logout()" class="btn btn-primary">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <div id="left-side">
        <div class="row justify-content-center" id="todayDiv">
            <lable id="todayTomatoLbl">Today's tomatos (<%=todayTmt.length%>)</lable>
            <!-- <span onclick="printToFile();" id="shareSpan"><img data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="Get a pic for today's summary." src="./public/image/share.png" width="20px"
                    height="25px" /></span> -->
            <div class="container" id="todayTmtId">
                <div class="row justify-content-start" id="todayTmtRow">
                    <%if (isTomatoOn) {%>
                    <div class="col-3">
                        <img id="todayTmtImgId" src="./public/image/growing.gif" width="40px" height="40px" alt="Avatar"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="Working in progress" />
                    </div>
                    <%}%>
                        <%for(let i=0; i<todayTmt.length; i++) {%>
                    <div class="col-3">
                        <%if(todayTmt[i]['duration'] == "25 mins") {%>
                        <img id="todayTmtImgId" src="./public/image/tomato.png" width="40px" height="40px" alt="Avatar"
                            data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="<%=todayTmt[i]['type']%>: <%=todayTmt[i]['duration']%>" />
                        <%} else {%>
                        <img id="todayTmtImgId" src="./public/image/green_tomato.png" width="40px" height="40px"
                            alt="Avatar" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="<%=todayTmt[i]['type']%>: <%=todayTmt[i]['duration']%>" />
                        <%}%>
                            </div>
                        <%}%>
                        <hr class="split" />
                    </div>
                </div>
            </div>


            <div class="row justify-content-center" id="todoDivId">
                <lable id="todoLabel">Today's todo</lable>
                <div id="todoDiv">
                    <div class="container" id="inputDivId">
                        <input type="text" id="todoInput" placeholder="New todo">
                        <span onclick="newTodo()" id="addNotebtn" style="cursor:pointer;" class="addBtn"><img
                                src="./public/image/add_btn.png" width="20px" height="20px" /></span>
                        <span class="spinner-border spinner-border-sm addBtn" id="addNotebtn-spinner"
                            style="color:white; visibility: hidden"></span>
                    </div>
                </div>

                <ul id="myUL" style="overflow: auto; height: 30vh">
                    <% for(let i=0; i<todos.length; i++) { %>
                    <% if(todos[i]['status'] == '1') {%>
                    <li id="<%=todos[i]['uid']%>" class="checked"><%=todos[i]['inputvalue']%></li>
                    <% } else { %>
                    <li id="<%=todos[i]['uid']%>" class=""><%=todos[i]['inputvalue']%></li>
                    <% }%>
                    <% } %>
                </ul>
            </div>
        </div>
    </div>
    <div id="right-side">
        <div id="toggle">
            <input id="toggle-on" class="toggle toggle-left" onclick="toggleLeft();" name="toggle" value="false"
                type="radio" checked>
            <label for="toggle-on" class="toggle-btn">Global notes</label>
            <input id="toggle-off" class="toggle toggle-right" onclick="toggleRight();" name="toggle" value="true"
                type="radio">
            <label for="toggle-off" class="toggle-btn">My notes</label>
        </div>
        <div class="collapse" id="notesSec">
            <% for (let i=0; i<tomatos.length; i++) { %>
            <div class="noteCard" id="<%=tomatos[i]['tid']%>_card" data-nid="<%=tomatos[i]['tid']%>">
                <img id="noteAvatar" src="<%=profileUrl%>" width="40px" height="40px" alt="Avatar">
                <label id="noteLable">Me</label>
                <label
                    id="noteTime"><%=moment.unix(parseInt(tomatos[i]["startTimeSec"]) - parseInt(tomatos[i]["timeOffset"]) * 60).format('lll')%></label>
                <%if(tomatos[i]["duration"]) {%>
                <img id="noteStatus" src="./public/image/green_tomato.png" width="40px" height="40px" alt="Avatar"
                    data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="<%=(tomatos[i]['duration']/60).toFixed(1)%> mins" />
                <%} else {%>
                <img id="noteStatus" src="./public/image/tomato.png" width="40px" height="40px" alt="Avatar"
                    data-bs-toggle="tooltip" data-bs-placement="bottom" title="25 mins" />
                <%}%>
                <br>
                <div class="row" id="typeSec">
                <%if(tomatos[i]["notes"] && tomatos[i]['type']) {%>
                <label class="noteType" id="<%=tomatos[i]['tid']%>_notetype"><%=tomatos[i]["type"]%></label>
                <%} else {%>
                <label class="noteType" id="<%=tomatos[i]['tid']%>_notetype">No type</label>
                <%}%>
                </div>
                <div id="noteText">
                    <%if(tomatos[i]["notes"] || (tomatos[i]['notes'] && tomatos[i]["notes"] !== "<p><br></p>")) {%>
                <div class="notehis" id="<%=tomatos[i]['tid']%>_notetext"><%-tomatos[i]["notes"]%></div>
                <%} else {%>
                <p id="<%=tomatos[i]['tid']%>_notetext" class="nothing">Nothing was noted in this session.</p>
                <%}%>
                </div>
                <%if(tomatos[i]["pubPath"]){%>
                <img class="pubpriImg" id="<%=tomatos[i]['tid']%>_status%>" src="./public/image/public.png" width="18px"
                    height="18px" data-bs-toggle="tooltip" data-bs-placement="bottom" title="This is a public notes."
                    data-ispub="1" />
                <%} else {%>
                <img class="pubpriImg" id="<%=tomatos[i]['tid']%>_status%>" src="./public/image/private.png"
                    width="18px" height="18px" data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="This is a private note, no one can view." data-ispub="0" />
                <% } %>
                <img id="noteLikeBtn" src="./public/image/liked.png" data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="Edit->publish to collect likes" />
                <label id="likeCnt"><%=tomatos[i]['likeCnt']%></label>
                <span onclick="EditNote(this.id)" id="<%=tomatos[i]['tid']%>_btn" class="editBtn">Edit</span>
            </div>
            <% } %>
        </div>

        <div class="collapse" id="pubNotesSec">
            <% for (let i=0; i<pubNotes.length; i++) { %>
            <div class="noteCard" id="<%=pubNotes[i]['tid']%>_pubcard" data-nid="<%=pubNotes[i]['tid']%>">
                <img id="noteAvatar" src="<%=pubNotes[i]['profile']%>" width="40px" height="40px" alt="Avatar">
                <label id="noteLable"><%=pubNotes[i]['name']%></label>
                <label
                    id="noteTime"><%=moment.unix(parseInt(pubNotes[i]["date"]) - parseInt(pubNotes[i]["timeOffset"]) * 60).format('lll')%></label>
                <br>
                <div class="row" id="typeSec">
                    <%if(pubNotes[i]["type"]) {%>
                    <label class="noteType" id="<%=pubNotes[i]['tid']%>_pubNotetype"><%=pubNotes[i]["type"]%></label>
                    <%} else {%>
                    <label class="noteType" id="<%=pubNotes[i]['tid']%>_pubNotetype">No type</label>
                    <%}%>
                </div>
                <div id="noteText">
                    <%if(pubNotes[i]['notes'] && pubNotes[i]["notes"] !== "<p><br></p>") {%>
                    <div class="notehis" id="<%=pubNotes[i]['tid']%>_pubNotetext"><%-pubNotes[i]["notes"]%></div>
                    <%} else {%>
                    <p id="<%=pubNotes[i]['tid']%>_pubNotetext" class="nothing">Nothing was noted in this session.</p>
                    <%}%>
                </div>
                <% if(pubNotes[i]['hasLiked']) {%>
                    <img class="pubNoteLikeBtn" id="<%=pubNotes[i]['notePath']%>_likebtn"
                        src="./public/image/already_liked.png" />
                    <%} else {%>
                    <img class="pubNoteLikeBtn" id="<%=pubNotes[i]['notePath']%>_likebtn" src="./public/image/liked.png"
                        onclick="LikeNote(this.id)" style="cursor:pointer;" />
                    <%}%>
                    <label class="pubNoteLikeCnt" id="<%=pubNotes[i]['notePath']%>_likebtnLabel"
                    style="pointer-events: none;"><%=pubNotes[i]['likeCnt']%></label>
                </div>
                <% } %>
            </div>
        </div>
    </div>

    <div id="middle">
        <div class="row justify-content-center">
            <div class="circlebar" id="circlebarId" data-circle-startTime=<%=durationSec%> data-circle-dialWidth=16
                data-circle-size="200px" data-circle-maxValue="<%=tomatoSessionLength%>" data-circle-skin="purple">
                <div class="loader-bg">
                    <% if(isTomatoOn) { %>
                    <div class="text">Loading...</div>
                    <% } else {  %>
                    <div class="text">25:00</div>
                    <% }%>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div id="startBtnSec">
                <a id="start_btn" style="background-color:
                                        transparent; border-width: 0px;" role="button" aria-expanded="false"
                    aria-controls="collapseTimer">
                    <% if(!isTomatoOn) { %>
                    <img id="startBtn" alt="start_a_tomato" src="./public/image/start_tomato.png" width="340"
                        height="45" onmouseover="startOver();" onmouseout="startOut();" onclick="ClickStartBtn();"
                        ondblclick="ClickStartBtn();">
                    <% } else { %>
                    <img id="startBtn" alt="stop_a_tomato" src="./public/image/stop_tomato.png" width="340" height="45"
                        onmouseover="startOver();" onmouseout="startOut();" onclick="ClickStartBtn();"
                        ondblclick="ClickStartBtn();">
                    <% } %>
                </a>
            </div>
            <hr>
        </div>

        <div class="row justify-content-center" id="addAnote" style="display: none;">
            <button class="astext" id="addnote" onmouseover="addAnoteOver();" onmouseleave="addAnoteLeave();"
                onclick="addAnote();" data-ison="0"><img id="addnotebtn" src="./public/image/add_note.png" width="87px"
                    height="32px"></button>
        </div>

        <div class="row justify-content-center">
            <div class="collapse" id="composingSec">
                <input id="tomatoType" list="hosting-plan" placeholder="Leave a task category for better stats..."
                    type="text" value="<%=pendingNoteType%>">
                <datalist id="hosting-plan">
                    <option value="Reading" />
                    <option value="Working" />
                    <option value="Workout" />
                </datalist>

                <div id="summernote" class="position-relative justify-content-center"><%-pendingNote%></div>
                <script>
                    $(document).ready(function () {
                        $('#summernote').summernote({
                            placeholder: 'During this tomato session, you can write here: 1.the tasks you want to complete. 2.your thoughts and things to remember. 3.your self reflection. ',
                            tabsize: 2,
                            toolbar: [
                                ['style', ['bold', 'italic', 'underline', 'clear']],
                            ],
                            height: 220,
                            focus: true,
                        }).on("summernote.enter", function (we, e) {
                            $(this).summernote('pasteHTML', '<br>&VeryThinSpace;');
                            e.preventDefault();
                        });
                    });
                </script>

                <div id="publishSection" style="display:table;">
                    <button id="saveBtn" type="button" onclick="saveNotes();">Save</button>
                </div>
            </div>
        </div>

        <div class="row justify-content-center" id="musicDiv">
            <div class="collapse" id="musicCollapse">
                <div id="app-cover" data-onload=<%=isMusicPlaying%> data-onrest=<%=remainingRestTimeSec%>
                    data-cddismissable=<%=cdDismissable%> data-tomatoSessionLength=<%=tomatoSessionLength%>
                    data-defaultcdlength=<%=coolDownLength%> data-todaycnt=<%=todayTmt.length%>
                    data-pendingnote=<%=pendingNote%>>
                    <div id="player" data-pendingnotetype=<%=pendingNoteType%>>
                        <div id="player-track">
                            <div id="album-name"></div>
                            <div id="track-name"></div>
                            <div id="track-time">
                                <div id="current-time"></div>
                                <div id="track-length"></div>
                            </div>
                            <div id="s-area">
                                <div id="ins-time"></div>
                                <div id="s-hover"></div>
                                <div id="seek-bar"></div>
                            </div>
                        </div>
                        <div id="player-content">
                            <div id="album-art">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2F_1.jpeg?alt=media&token=1bb7b4f7-f7aa-43c4-b6e7-8003fb40d8ec"
                                    class="active" id="_1">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2F_2.jpeg?alt=media&token=931388e5-a928-45b6-8db4-5f966559e512"
                                    class="active" id="_2">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2F_3.jpeg?alt=media&token=7d0fcad3-305e-47dc-a1e9-4aca3b0f43ef"
                                    class="active" id="_3">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2F_4.jpeg?alt=media&token=13826994-10ba-47f5-b3cf-668a9f544738"
                                    class="active" id="_4">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2F_5.jpeg?alt=media&token=230fd83b-5cc7-4518-b0d4-a050813f60c2"
                                    class="active" id="_5">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2FES_100_Times_Jones_Meadow.jpeg?alt=media&token=3506ed8f-e264-45e0-96c7-5837095261cb"
                                    class="active" id="_6">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2FES_A_Subtle_Reflection_Daniel_Kaede.jpeg?alt=media&token=60eed0ce-c372-4e69-bff5-0c5ee0bcb589"
                                    class="active" id="_7">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2FES_Abstractions_Aleph_One.jpeg?alt=media&token=8576a2cd-d593-42cc-bb3b-08fefd923518"
                                    class="active" id="_8">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2FES_Alike_Jones_Meadow.jpeg?alt=media&token=56ad6c86-588d-493a-ad7d-a4f8c314a9e8"
                                    class="active" id="_9">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2FES_Avinam_Valante.jpeg?alt=media&token=183a9647-f304-485d-8422-c1a57ccd83a0"
                                    class="active" id="_10">
                                <img src="https://firebasestorage.googleapis.com/v0/b/etomato-63aac.appspot.com/o/sounds%2FES_Baby_Idk_Rambutan.jpeg?alt=media&token=39785b51-9fc3-4b37-a23f-df73dcc84940"
                                    class="active" id="_11">
                                <div id="buffer-box">Buffering ...</div>
                            </div>
                            <div id="player-controls">
                                <div class="control">
                                    <div class="button" id="play-previous">
                                        <i class="fas fa-backward"></i>
                                    </div>
                                </div>
                                <div class="control">
                                    <div class="button" id="play-pause-button">
                                        <i class="fas fa-play"></i>
                                    </div>
                                </div>
                                <div class="control">
                                    <div class="button" id="play-next">
                                        <i class="fas fa-forward"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="coolDownModal" class="modal hide" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="coolDownModalTitle">5 mins Break</h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="circlebarCD" id="circlebarCDiD" data-circle-startTime=<%=remainingRestTimeSec%>
                            data-circle-dialWidth=10 data-circle-size="200px" data-circle-maxValue="<%=coolDownLength%>"
                            data-circle-skin="blue">
                            <div class="loader-bg-cd">
                                <div class="cd-text">05:00</div>
                            </div>
                        </div>
                    </div>
                    <hr class="row" style="width: 100%;">
                    <p class="pos_center row">Pomodoro technique suggests 3-5 minutes break to disconnect
                        from your work.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="coolDownForStopModal" class="modal hide" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="coolDownForStopModalTitle">5 mins Break(stopped tomato)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="circlebarCD2" id="circlebarCDiD2" data-circle-startTime=<%=remainingRestTimeSec%>
                            data-circle-dialWidth=10 data-circle-size="200px" data-circle-maxValue="<%=coolDownLength%>"
                            data-circle-skin="blue">
                            <div class="loader-bg">
                                <div class="text">05:00</div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <p class="pos_center">Pomodoro technique suggests 3-5 minutes break to disconnect
                        from your work.</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer-area-l-12 position-relative" style="text-align:left;">
        <div class="modal fade" role="dialog" id="statsModal" data-bs-backdrop="static" data-bs-keyboard="false"
            data-tmtid="0">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="edit-title">My stats (not including today)</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <% for(let i=0; i<statsDays.length; i++) { %>
                        <div class="row">
                            <hr>
                            <canvas id="myChart_<%=i%>" width="400" height="400"></canvas>
                            <hr>
                        </div>
                        <script>
                            var text = '<%-statsDays[i][0]%>' + ' (in mins)';
                            var chartId = 'myChart_<%=i%>'
                            var labels = [];
                            var data = [];
                            var rgb = ['#FF6633', '#FFB399', '#FF33FF', '#FFFF99', '#00B3E6',
                                '#E6B333', '#3366E6', '#999966', '#99FF99', '#B34D4D',
                                '#80B300', '#809900', '#E6B3B3', '#6680B3', '#66991A',
                                '#FF99E6', '#CCFF1A', '#FF1A66', '#E6331A', '#33FFCC',
                                '#66994D', '#B366CC', '#4D8000', '#B33300', '#CC80CC',
                                '#66664D', '#991AFF', '#E666FF', '#4DB3FF', '#1AB399',
                                '#E666B3', '#33991A', '#CC9999', '#B3B31A', '#00E680',
                                '#4D8066', '#809980', '#E6FF80', '#1AFF33', '#999933',
                                '#FF3380', '#CCCC00', '#66E64D', '#4D80CC', '#9900B3',
                                '#E64D66', '#4DB380', '#FF4D4D', '#99E6E6', '#6666FF'
                            ];
                            for (const [key, value] of Object.entries(JSON.parse(
                                    '<%-JSON.stringify(statsDays[i][1])%>'))) {
                                labels.push(key);
                                data.push(value / 60);
                                rgb.push(Math.floor(Math.random() * 255));
                            }
                            rgb = rgb.slice(1, 1 + labels.length)
                            new Chart(document.getElementById(chartId).getContext('2d'), {
                                type: 'pie',
                                data: {
                                    labels: labels,
                                    datasets: [{
                                        backgroundColor: rgb,
                                        data: data
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    plugins: {
                                        legend: {
                                            position: 'top',
                                        },
                                        title: {
                                            display: true,
                                            text: text,
                                        }
                                    }
                                }
                            });
                        </script>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" role="dialog" id="editNote" data-bs-backdrop="static" data-bs-keyboard="false"
            data-tmtid="0">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="edit-title">Editing</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <input id="EditTomatoType" list="hosting-plan"
                            placeholder="Leave a task category for better stats..." type="text" value="">
                        <datalist id="hosting-plan">
                            <option value="Reading" />
                            <option value="Working" />
                            <option value="Workout" />
                        </datalist>

                        <div id="EditSummernote" class="position-relative justify-content-center"></div>
                        <script>
                            $(document).ready(function () {
                                $('#EditSummernote').summernote({
                                    placeholder: 'During this tomato session, you can write here: 1.the tasks you want to complete. 2.your thoughts and things to remember. 3.your self reflection. ',
                                    tabsize: 2,
                                    toolbar: [
                                        ['style', ['bold', 'italic', 'underline', 'clear']],
                                    ],
                                    height: 800,
                                    focus: true,
                                }).on("EditSummernote.enter", function (we, e) {
                                    $(this).summernote('pasteHTML', '<br>&VeryThinSpace;');
                                    e.preventDefault();
                                });
                            });
                        </script>
                    </div>
                    <div class="modal-footer">
                        <div id="EditpublishSection" style="display:table;">
                            <button id="deleteNoteBtn" type="button" onclick="deleteNotes();">Delete</button>
                            <button id="publishNoteBtn" type="button" onclick="publishNotes();">Publish</button>
                            <button id="saveNoteBtn" type="button" onclick="saveEditNotes();">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    </div>
    <!-- Vendor Scripts -->
    <script src="./public/js/vendor.min.js"></script>
    <script src="./public/plugins/aos/aos.min.js"></script>
    <!-- Activation Script -->
    <script src="./public/js/custom.js"></script>
    <script src="./public/js/clock.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBe7BVBWqB6znKy7b_UND2nUd09nnUFmEQ",
            authDomain: "etomato-63aac.firebaseapp.com",
            databaseURL: "https://etomato-63aac-default-rtdb.firebaseio.com",
            projectId: "etomato-63aac",
            storageBucket: "etomato-63aac.appspot.com",
            messagingSenderId: "144378496941",
            appId: "1:144378496941:web:dc08de13472e73f14d0324",
            measurementId: "G-7W4Q6GF7JP"
        };
        try {
            firebase.initializeApp(firebaseConfig);
        } catch {}
    </script>

    <script>
        // Share
        function printToFile() {
            var body = document.createElement("body");
            body.style.background = "black";
            var header = document.createElement("header"),
                h4 = document.createElement("h4");

            h4.textContent = "something";
            header.appendChild(h4);
            body.appendChild(header);
            var todayDiv = structuredClone(document.querySelector("#todayDiv"))
            body.appendChild(todayDiv)
            alert(todayDiv)
            html2canvas(body).then(canvas => {
                canvas.toBlob(function (blob) {
                    window.saveAs(blob, 'e-tomato.jpg');
                });
            });
        }

        function onLoad() {
            firebase.analytics().logEvent('onLoad');
            var isOnRest = document.getElementById('app-cover').dataset.onrest;
            var cdDismissable = document.getElementById('app-cover').dataset.cddismissable;
            if (isOnRest > 0) {
                if (cdDismissable == "true") {
                    // $('#coolDownForStopModal').modal("show");
                    // StartCoolDown2();
                } else {
                    $('#coolDownModal').modal("show");
                    StartCoolDown();
                }
            } else {
                var isMusicPlaying = (document.getElementById('app-cover').dataset.onload === "true");
                if (isMusicPlaying) {
                    // var answer = window.confirm("Your music was on in this session, continue?");
                    // if (answer) {
                    //     document.getElementById('play-pause-button').click();
                    // }
                }
            }
            var btnVal = document.getElementById("startBtn").alt;
            if (btnVal == "start_a_tomato") {
                $('#musicCollapse').collapse("hide")
                document.getElementById('addAnote').style.display = "none";
            } else {
                $('#musicCollapse').collapse("show")
                document.getElementById('addAnote').style.display = "block";
            }

            var pendingNoteType = document.getElementById('player').dataset.pendingnotetype;
            var pendingNote = document.getElementById('app-cover').dataset.pendingnote;
            if (pendingNoteType || (pendingNote && pendingNote !== "<p><br></p>")) {
                $('#composingSec').collapse("show")
                document.getElementById('addnotebtn').src = "./public/image/add_note.png";
            }
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            })
            const date = new Date();
            const offset = date.getTimezoneOffset();
            $.ajax({
                url: "./sendTimeOffset",
                type: "POST",
                data: {
                    timeOffset: offset
                }
            });
            $('#notesSec').collapse("hide")
            $('#pubNotesSec').collapse("show")

            var input = document.getElementById("todoInput");
            input.addEventListener("keypress", function (event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    document.getElementById("addNotebtn").click();
                }
            });
        }

        function toggleLeft() {
            $('#notesSec').collapse("hide")
            $('#pubNotesSec').collapse("show")
        }

        function toggleRight() {
            $('#notesSec').collapse("show")
            $('#pubNotesSec').collapse("hide")
        }

        function LikeNote(btnId) {
            var notePath = btnId.split("_likebtn")[0];
            $.ajax({
                url: "./likeNote",
                type: "POST",
                data: {
                    notePath: notePath,
                },
                success: function (result) {
                    document.getElementById(notePath + "_likebtnLabel").innerText = result;
                    document.getElementById(notePath + "_likebtn").src = "./public/image/already_liked.png";
                },
                error: function (error) {
                    new Toasteur().error(error.responseText, 'Error!', () => {});
                },
            });
        }

        function EditNote(btnId) {
            var tmtId = btnId.split("_btn")[0]
            var tmtType = document.getElementById(tmtId + "_notetype").innerText
            var noteText = document.getElementById(tmtId + "_notetext").innerText
            document.getElementById("EditTomatoType").value = tmtType;
            $('#editNote')[0].dataset.tmtid = tmtId;
            $('#EditSummernote').summernote('code', noteText);
            if (document.getElementById(tmtId + "_status").dataset.ispub === "1") {
                document.getElementById('publishNoteBtn').innerHTML = "Unpublish"
            } else {
                document.getElementById('publishNoteBtn').innerHTML = "Publish"
            }


            $("#editNote").modal("show");
        }

        function saveEditNotes() {
            var tmtId = $('#editNote')[0].dataset.tmtid;
            var tmtType = document.getElementById("EditTomatoType").value
            var notes = $('#EditSummernote').summernote('code')

            $.ajax({
                url: "./editNoteSave",
                type: "POST",
                data: {
                    tmtId: tmtId,
                    tmtType: tmtType,
                    noteText: notes,
                },
                success: function (result) {
                    $("#editNote").modal("hide");
                    document.getElementById(tmtId + "_notetype").innerText = tmtType.length ? tmtType :
                        "No type";
                    document.getElementById(tmtId + "_notetext").innerText = notes ? notes :
                        "Nothing was noted in this session.";
                    if (!notes || notes === "<p><br></p>") {
                        document.getElementById(tmtId + "_notetext").className = "nothing"
                    } else {
                        document.getElementById(tmtId + "_notetext").className = "notehis"
                    }
                    new Toasteur().success('', "Note saved",
                        () => {});
                },
                error: function (error) {
                    new Toasteur().error(error.responseText, 'Error!', () => {});
                },
            });
        }

        function deleteNotes() {
            var tmtId = $('#editNote')[0].dataset.tmtid;
            if (document.getElementById(tmtId + "_status").dataset.ispub === "1") {
                alert("This note is public, please unpublish it first.")
                return;
            }
            var answer = window.confirm("Sure to delete this note?");
            if (answer) {
                $.ajax({
                    url: "./deleteNote",
                    type: "POST",
                    data: {
                        tmtId: tmtId,
                    },
                    success: function (result) {
                        $("#editNote").modal("hide");
                        var tmtId = $('#editNote')[0].dataset.tmtid;
                        document.getElementById(tmtId + "_card").remove();
                        new Toasteur().success('', "Note deleted",
                            () => {});
                    },
                    error: function (error) {
                        new Toasteur().error(error.responseText, 'Error!', () => {});
                    },
                });
            } else {}
        }

        function publishNotes() {
            var tmtId = $('#editNote')[0].dataset.tmtid;
            var question = ""
            if (document.getElementById(tmtId + "_status").dataset.ispub === "1") {
                question = "Sure to unpublish this note?"
            } else {
                question = "Sure to publish this note?"
            }
            var answer = window.confirm(question);
            if (answer) {
                var tmtId = $('#editNote')[0].dataset.tmtid;
                $.ajax({
                    url: "./publishNotes",
                    type: "POST",
                    data: {
                        tmtId: tmtId,
                    },
                    success: function (result) {
                        saveEditNotes();
                        if (result === "1") {
                            document.getElementById(tmtId + "_status").src = "./public/image/public.png";
                            document.getElementById(tmtId + "_status").title =
                                "This is a public notes."
                            document.getElementById(tmtId + "_status").dataset.ispub =
                                "1"
                            new Toasteur().success('', "Note published",
                                () => {});
                        } else {
                            document.getElementById(tmtId + "_status").src = "./public/image/private.png";
                            document.getElementById(tmtId + "_status").title =
                                "This is a private note, no one can view."
                            document.getElementById(tmtId + "_status").dataset.ispub =
                                "0"
                            new Toasteur().success('', "Note unpublished",
                                () => {});
                        }
                    },
                    error: function (error) {
                        new Toasteur().error(error.responseText, 'Error!', () => {});
                    },
                });
            } else {}
        }


        function addAnoteLeave() {
            var isOn = document.getElementById("addnote").dataset.ison;
            if (isOn === "0") {
                document.getElementById('addnotebtn').src = "./public/image/add_note.png";
            } else {
                document.getElementById('addnotebtn').src = "./public/image/hide_note.png";
            }
        }

        function addAnoteOver() {
            var isOn = document.getElementById("addnote").dataset.ison;
            if (isOn === "0") {
                document.getElementById('addnotebtn').src = "./public/image/add_note_hover.png";
            } else {
                document.getElementById('addnotebtn').src = "./public/image/hide_note_hover.png";
            }
        }

        function addAnote() {
            var isOn = document.getElementById("addnote").dataset.ison;
            if (isOn === "0") {
                $('#composingSec').collapse("show")
                document.getElementById('addnotebtn').src = "./public/image/hide_note.png";
                document.getElementById("addnote").dataset.ison = "1";
            } else {
                document.getElementById("addnote").dataset.ison = "0";
                $('#composingSec').collapse("hide")
                document.getElementById('addnotebtn').src = "./public/image/add_note.png";
            }
        }

        function startOver() {
            var snd = new Audio("./public/sounds/start_over.mp3");
            // var snd = new Audio(
            //     "https://drive.google.com/file/d/1EvRx8uqJ17Q9XpJ9rpXetXdZaWqRaP6w/view?usp=sharing");
            snd.play();
            var btnVal = document.getElementById("startBtn").alt;
            if (btnVal == "start_a_tomato") {
                document.getElementById('startBtn').src = "./public/image/start_tomato_hover.png";
                firebase.analytics().logEvent('startOver');
            } else {
                document.getElementById('startBtn').src = "./public/image/stop_tomato_hover.png";
                firebase.analytics().logEvent('stopOver');
            }
        }

        function startOut() {
            var btnVal = document.getElementById("startBtn").alt;
            if (btnVal == "start_a_tomato") {
                document.getElementById("startBtn").src = "./public/image/start_tomato.png";
                firebase.analytics().logEvent('startOut');
            } else {
                document.getElementById("startBtn").src = "./public/image/stop_tomato.png";
                firebase.analytics().logEvent('stopOut');
            }
        }

        function ClickStartBtn() {
            document.getElementById("startBtn").src = "./public/image/start_tomato_pressed.png";
            var snd = new Audio("./public/sounds/start_clicked.mp3");
            // var snd = new Audio(
            //     "https://drive.google.com/file/d/1RwlArKE3ls_8tKl3LuRInMGr2TuXpg_s/view?usp=sharing");
            snd.play();
            var btnVal = document.getElementById("startBtn").alt;
            if (btnVal == "start_a_tomato") {
                firebase.analytics().logEvent('ClickStartBtn');
                const date = new Date();
                const offset = date.getTimezoneOffset();
                $.ajax({
                    url: "./startSession",
                    type: "POST",
                    data: {
                        timeOffset: offset
                    },
                    success: function (result) {
                        new Toasteur().success('Enjoy your time!', "A new Tomato is started",
                            () => {});
                        document.getElementById("startBtn").src =
                            "./public/image/stop_tomato.png";
                        document.getElementById("startBtn").alt = "stop_a_tomato";
                        $('#musicCollapse').collapse("show")
                        var WIPTmt =
                            '<div class="col-3"> <img id="todayTmtImgId" src="./public/image/growing.gif" width="40px" height="40px" alt="Avatar" data-bs-toggle="tooltip" data-bs-placement="bottom" title data-bs-original-title="Working in progress"  aria-label="Working in progress" /> </div>'
                        $('#todayTmtRow').prepend(
                            WIPTmt);

                        document.getElementById('addAnote').style.display = "block";
                        document.getElementById('play-pause-button').click();
                        var tooltipTriggerList = [].slice.call(document.querySelectorAll(
                            '[data-bs-toggle="tooltip"]'))
                        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                            return new bootstrap.Tooltip(tooltipTriggerEl)
                        })
                    },
                    error: function (error) {
                        new Toasteur().error(error.responseText, 'Error!', () => {});
                        document.getElementById("startBtn").alt = "start_a_tomato";
                        $('#musicCollapse').collapse("hide")
                    },
                });
            } else {
                firebase.analytics().logEvent('ClickStopBtn');
                $('#stopTomatoModal').modal("show");
            }
        }

        function logout() {
            firebase.analytics().logEvent('logout');
            fetch("./logout", {
                    method: "GET",
                })
                .then(response => {
                    window.location.href = "./";
                });
            sessionStorage.setItem("_session", "");
        }

        function SendFeedback() {
            var checkedValue = document.querySelector('.feedback_opt:checked').value;
            var comments = document.getElementById("feedbackMsg").value
            if (checkedValue || comments) {
                $.ajax({
                    url: "./feedback",
                    type: "POST",
                    data: {
                        checkedValue: checkedValue,
                        comments: comments,
                    },
                    success: function (result) {
                        new Toasteur().success("Thanks for the feedback!",
                            'We really appreciate your help',
                            () => {});
                        $('#feedbackModal').modal("hide");
                    },
                    error: function (error) {
                        new Toasteur().error(error.responseText, 'Error!', () => {});
                    },
                });
            }
        }

        function saveNotes() {
            // var checkedValue = document.getElementById('publishCheckBox').checked;
            var tomatoType = document.getElementById("tomatoType").value;
            var notes = $('#summernote').summernote('code')
            if (!tomatoType && !notes) {
                return;
            }
            if (!tomatoType || tomatoType.length == 0) {
                tomatoType = "No type";
            }
            $.ajax({
                url: "./saveNotes",
                type: "POST",
                data: {
                    // checkedValue: checkedValue,
                    tomatoType: tomatoType,
                    notes: notes,
                },
                success: function (result) {
                    new Toasteur().success("Note saved", '',
                        () => {});
                },
                error: function (error) {
                    new Toasteur().error(error.responseText, 'Error!', () => {});
                },
            });
        }

        function showSpinner(show, eleId) {
            var eleSpinnerId = eleId + '-spinner';
            if (!show) {
                document.getElementById(eleId).style.visibility = "visible";
                document.getElementById(eleSpinnerId).style.visibility = 'hidden'
            } else {
                document.getElementById(eleId).style.visibility = "hidden";
                document.getElementById(eleSpinnerId).style.visibility = 'visible'
            }
        }

        function newTodo() {
            var inputValue = document.getElementById("todoInput").value;
            if (inputValue === '') {
                alert("You must write something!");
                return
            }
            showSpinner(true, 'addNotebtn')
            $.ajax({
                url: "./addTodo",
                type: "POST",
                data: {
                    inputValue: inputValue,
                },
                success: function (result) {
                    var li = document.createElement("li");
                    var inputValue = document.getElementById("todoInput").value;
                    var t = document.createTextNode(inputValue);
                    li.id = result
                    li.appendChild(t);
                    if (inputValue === '') {
                        alert("You must write something!");
                    } else {
                        document.getElementById("myUL").insertBefore(li, document.getElementById("myUL")
                            .firstChild);
                    }
                    showSpinner(false, 'addNotebtn');
                    document.getElementById("todoInput").value = "";
                    var span = document.createElement("SPAN");
                    var txt = document.createTextNode("\u00D7");
                    span.className = "closeTodo";
                    span.id = result + "closeTodoId";
                    span.appendChild(txt);

                    var spanSpinner = document.createElement("SPAN");
                    spanSpinner.className = "spinner-grow spinner-grow-sm closeTodo";
                    spanSpinner.id = result + "closeTodoId-spinner";
                    spanSpinner.style.visibility = "hidden";
                    spanSpinner.style.color = "white"
                    spanSpinner.style.height = "100%"
                    li.appendChild(span);
                    li.appendChild(spanSpinner)
                    for (i = 0; i < close.length; i++) {
                        close[i].onclick = function () {
                            var div = this.parentElement;
                            var todoId = div.id;
                            showSpinner(true, todoId + "closeTodoId");
                            $.ajax({
                                url: "./deleteTodo",
                                type: "POST",
                                data: {
                                    todoId: todoId,
                                },
                                success: function (result2) {
                                    var div2 = document.getElementById(result2);
                                    div2.style.display = "none";
                                    showSpinner(false, todoId + "closeTodoId");
                                },
                                error: function (error) {
                                    new
                                    Toasteur().error(error.responseText, 'Error!',
                                        () => {});
                                    showSpinner(false, todoId + "closeTodoId");
                                },
                            });
                        }
                    }
                },
                error: function (error) {
                    new Toasteur().error(error.responseText, 'Error!', () => {});
                    showSpinner(false, 'addNotebtn');
                },
            });
        }
    </script>

    <script>
        $(function () {
            $('#modalClose').on('click', function () {
                $('#stopTomatoModal').modal("hide");
            })
            $('#modalClose1').on('click', function () {
                $('#stopTomatoModal').modal("hide");
            })
            $('#modalClose2').on('click', function () {
                $('#stopTomatoModal').modal("hide");
            })
        })
    </script>

    <script>
        // Create a "close" button and append it to each list item
        var myNodelist = document.getElementsByTagName("LI");
        var i;
        for (i = 0; i < myNodelist.length; i++) {
            var span = document.createElement("SPAN");
            var txt = document.createTextNode("\u00D7");
            var tdId = myNodelist[i].id;
            span.className = "closeTodo";
            span.id = tdId + "closeTodoId";
            span.appendChild(txt);
            var spanSpinner = document.createElement("SPAN");
            spanSpinner.className = "spinner-border spinner-border-sm closeTodo";
            spanSpinner.id = tdId + "closeTodoId-spinner";
            spanSpinner.style.visibility = "hidden";
            spanSpinner.style.color = "white"
            spanSpinner.style.height = "100%"
            myNodelist[i].appendChild(span);
            myNodelist[i].appendChild(spanSpinner);
        } // Click on a close button to hide the current list item var
        close = document.getElementsByClassName("closeTodo");
        var i;
        for (i = 0; i < close.length; i++) {
            close[i].onclick = function () {
                var div = this.parentElement;
                var todoId = div.id;
                showSpinner(true, todoId + "closeTodoId")
                $.ajax({
                    url: "./deleteTodo",
                    type: "POST",
                    data: {
                        todoId: todoId,
                    },
                    success: function (result2) {
                        var div2 = document.getElementById(result2);
                        div2.style.display = "none";
                        showSpinner(false, todoId + "closeTodoId")
                    },
                    error: function (error) {
                        new Toasteur().error(error.responseText, 'Error!', () => {});
                        showSpinner(false, todoId + "closeTodoId")
                    },
                });
            }
        }
        var list = document.querySelector('ul');
        list.addEventListener('click',
            function (ev) {
                if (ev.target.tagName === 'LI') {
                    $.ajax({
                        url: "./toogleTodo",
                        type: "POST",
                        data: {
                            todoId: ev.target.id,
                        },
                        success: function (result) {
                            if (result === '1') {
                                ev.target.className = 'checked';
                            } else {
                                ev.target.className = "";
                            }
                        },
                        error: function (error) {
                            new
                            Toasteur().error(error.responseText, 'Error!',
                                () => {});
                        },
                    });
                }
            }, false); // Create a new list item when clicking on the "Add" button
    </script>
    <script type="module" src="./public/js/coolDownClock.js"></script>
    <script type="module" src="./public/js/coolDownForStopClock.js"></script>
    <script type="module" src="./public/js/music.js"></script>
    <script src="./public/summernote/summernote.min.js"></script>
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>

    <script src="./public/toast/toasteur.min.js"></script>
</body>

</html>