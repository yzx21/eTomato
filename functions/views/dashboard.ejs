<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>eTomato</title>
  <link rel="shortcut icon" href="./public/image/tomato.png" type="image/x-icon">
  <!-- Bootstrap , fonts & icons  -->
  <link rel="stylesheet" href="./public/css/bootstrap.css">
  <link rel="stylesheet" href="./public/css/clock.css">
  <link rel="stylesheet" href="./public/fonts/icon-font/css/style.css">
  <link rel="stylesheet" href="./public/fonts/typography-font/typo.css">
  <link rel="stylesheet" href="./public/fonts/fontawesome-5/css/all.css">
  <link href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <!-- Plugin'stylesheets  -->
  <link rel="stylesheet" href="./public/plugins/aos/aos.min.css">
  <!-- Vendor stylesheets  -->
  <link rel="stylesheet" href="./public/css/main.css">
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
  <!-- Custom stylesheet -->
  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
  <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
</head>

<body data-theme-mode-panel-active data-theme="light" style="font-family: 'Mazzard H';" onload="onLoad();">
  <div class="site-wrapper overflow-hidden position-relative">
    <!-- Site Header -->
    <!-- Preloader -->
    <!-- <div id="loading">
    <div class="preloader">
     <img src="./image/preloader.gif" alt="preloader">
   </div>
   </div>    -->
    <!--Site Header Area -->
    <header class="site-header site-header--menu-right landing-14-menu site-header--absolute site-header--sticky">
      <div class="container">
        <nav class="navbar site-navbar">
          <!-- Brand Logo-->
          <div class="brand-logo">
            <a href="#">
              <!-- light version logo (logo must be black)-->
              <img src="./public/image/logo/logo.png" alt="" class="light-version-logo" width="270" height="59">
              <!-- Dark version logo (logo must be White)-->
              <img src="./public/image/logo/logo.png" alt="" class="dark-version-logo" width="270" height="59">
            </a>
          </div>
          <div class="menu-block-wrapper">
            <div class="menu-overlay"></div>
            <nav class="menu-block" id="append-menu-header">
              <div class="mobile-menu-head">
                <div class="go-back">
                  <i class="fa fa-angle-left"></i>
                </div>
                <div class="current-menu-title"></div>
                <div class="mobile-menu-close">&times;</div>
              </div>
              <ul class="site-menu-main">
                <% if (logged_in) { %> 
                  <li class="nav-item">
                    <a href="#" class="nav-link-item"><img alt="History" src="./public/image/button_history.png"
                      width=102" height="30"></a>
                  </li>
                <% } %>
                <li class="nav-item">
                  <% if (logged_in) { %>
                  <a href="#" class="nav-link-item" data-toggle="modal" data-target="#logoutModal"><img alt="Logout" src="./public/image/button_logout.png"
                    width="68" height="30"></a>
                  <% } else { %>
                    <a href="#" class="nav-link-item" onclick="login(); return false;"><img alt="Login" src="./public/image/button_login.png"
                      width="68" height="30"></a>
                  <% } %>
                </li>
              </ul>
            </nav>
          </div>
          <!-- mobile menu trigger -->
          <div class="mobile-menu-trigger">
            <span></span>
          </div>
          <!--/.Mobile Menu Hamburger Ends-->
        </nav>
      </div>
    </header>
    <!-- navbar- -->
    <!-- Hero Area -->

    <div class="hero-area-l-14 position-relative z-index-1 overflow-hidden">
      <div class="container">
        <div class="row position-relative justify-content-center">
          <div class="clock" data-aos="fade-left" style="font-family:Futura; text-shadow: 4px 4px #000000; font-size: 120;">
            <div class="hours">
              <div class="first">
                <div class="number">0</div>
              </div>
              <div class="second">
                <div class="number">0</div>
              </div>
            </div>
            <div class="tick">:</div>
            <div class="minutes">
              <div class="first">
                <div class="number">0</div>
              </div>
              <div class="second">
                <div class="number">0</div>
              </div>
            </div>
          </div>
          
          <div class="col-xl-7 col-lg-5 col-md-8" data-aos="fade-right" data-aos-duration="800" data-aos-once="true">
            <div class="content" style="text-align:center;">
              <p style="font-family:AppleGothic;">Action speak louder than words!</p>
              <a href="#">
                  <img id="startBtn" alt="Start a tomato" src="./public/image/button_start.png" width="348" height="96" onmouseover="startOver();" onmouseout="startOut();" onclick="startTomato();" ondblclick="startTomato();">
              </a>
            </div>
          </div>
          <div class="col-xl-7 col-lg-5 col-md-8 " data-aos="fade-left" data-aos-duration="800" data-aos-once="true">
            <div class="banner-image-l-14">
            </div>
          </div>
        </div>
      </div>
      <div class="bg-shape-14"></div>
    </div>

    <% if (!logged_in) { %>
      <div class="features-area-l-14">
        <div class="container bg-shape-img-2 position-relative">
          <div class="row features-area-l-14 justify-content-center mx-0">
            <div class="col-lg-6 col-md-8 col-sm-10 px-lg-6" data-aos="fade-right" data-aos-duration="800" data-aos-once="true">
              <div class="content-area  d-flex">
                <div class="circle-85 hover-icon">
                  <img src="./public/image/l4/f-icon-1.png" alt="">
                </div>
                <div class="content-body pl-sm-14 pl-5">
                  <h5>
                    What is the Tomato (Pomodoro) Technique?</h5>
                  <p class="mb-0">
                    The Pomodoro Technique was developed in the late 1980s by then university student Francesco Cirillo. Cirillo was struggling to focus on his studies and complete assignments. Feeling overwhelmed, he asked himself to commit to just 10 minutes of focused study time. Encouraged by the challenge, he found a tomato (pomodoro in Italian) shaped kitchen timer, and the Pomodoro technique was born.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-md-8 col-sm-10" data-aos="fade-left" data-aos-duration="800" data-aos-once="true">
              <div class="content-area  d-flex ">
                <div class="circle-85 hover-icon">
                  <img src="./public/image/l4/f-icon-2.png" alt="">
                </div>
                <div class="content-body">
                  <h5>
                    What makes pomodoro so effective?</h5>
                  <p class="mb-0">
                    - Making it easy to just get started <br>
                    - Combating distractions <br>
                    - Becoming more aware of where your time goes <br>
                    - Gamifying your productivity
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-md-8 col-sm-10" data-aos="fade-right" data-aos-duration="800" data-aos-once="true">
              <div class="content-area  d-flex ">
                <!-- circle-85 start -->
                <div class="circle-85 hover-icon">
                  <img src="./public/image/l4/f-icon-3.png" alt="">
                </div>
                <div class="content-body">
                  <h5>
                    Quick tips for pomodoro-ing</h5>
                  <p class="mb-0">
                    - Plan out your pomodoros in advance <br>
                    - Build overflow pomodoros into your day <br>
                    - Experiment with the length of your pomodoros <br>
                    - Get away from screens during breaks <br>
                    - Use an app to enforce your pomodoros <br>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-md-8 col-sm-10" data-aos="fade-left" data-aos-duration="800" data-aos-once="true">
              <div class="content-area  d-flex ">
                <div class="circle-85  hover-icon">
                  <img src="./public/image/l4/f-icon-4.png" alt="" />
                </div>
                <div class="content-body">
                  <h5>
                    How to pomodoro with Todoist</h5>
                  <p class="mb-0">
                    - Plan <br>
                    - Work <br>
                    - Repeat <br>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% } %>
    
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" onclick="logout()">Logout</a>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer-area-l-12 position-relative" style="text-align:center;">
      All rights reserved by Alan Xie @2022
    </footer>
  </div>
  <!-- Vendor Scripts -->
  <script src="./public/js/vendor.min.js"></script>
  <script src="./public/plugins/aos/aos.min.js"></script>
  <script src="./public/plugins/menu/menu.js"></script>
  <!-- Activation Script -->
  <script src="./public/js/custom.js"></script>
  <script src="./public/js/clock.js"></script>

  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyBe7BVBWqB6znKy7b_UND2nUd09nnUFmEQ",
        authDomain: "etomato-63aac.firebaseapp.com",
        databaseURL: "https://etomato-63aac-default-rtdb.firebaseio.com",
        projectId: "etomato-63aac",
        storageBucket: "etomato-63aac.appspot.com",
        messagingSenderId: "144378496941",
        appId: "1:144378496941:web:dc08de13472e73f14d0324",
        measurementId: "G-7W4Q6GF7JP"
      };
      try {
        firebase.initializeApp(firebaseConfig);
      } catch {
      }
  </script>
  <script>
    function onLoad() {
      firebase.analytics().logEvent('onLoad');
    }

    function startOver() {
      document.getElementById('startBtn').src = "./public/image/button_start_over.png";
      var snd = new Audio("./public/sounds/start_over.mp3");
      snd.play();
      firebase.analytics().logEvent('startOver');
    }
    function startOut() {
      document.getElementById("startBtn").src = "./public/image/button_start.png";
      firebase.analytics().logEvent('startOut');
    }

    function startTomato() {
      document.getElementById("startBtn").src = "./public/image/button_start_pressed.png";
      var snd = new Audio("./public/sounds/start_clicked.mp3");
      snd.play();
      firebase.analytics().logEvent('startTomato');
    }

    function login() {
      firebase.analytics().logEvent('login');
      var provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth()
        .signInWithPopup(provider)
        .then((result) => {
          /** @type {firebase.auth.OAuthCredential} */
          var credential = result.credential;
          // This gives you a Google Access Token. You can use it to access the Google API.
          var token = credential.accessToken;
          // The signed-in user info.
          var user = result.user;
          var headers = new Headers();
          headers.append('Content-Type', 'application/json');
          headers.append('Accept', 'application/json')
          firebase.auth().currentUser.getIdToken()
          .then((idToken) => {
            return fetch("./sessionLogin", {
                  method: "POST",
                  mode: 'same-origin',
                  redirect: 'follow',
                  credentials: 'include', // Don't forget to specify this if you need cookies
                  header: headers,
                  body: JSON.stringify({ idToken }),
                })
                .then(function () {
                  return firebase.auth().signOut();
                })
                .then(function () {
                  window.location.href = "./";
                });
          })
          .catch((error) => {
            alert(error)
          });
        })
        .catch((error) => {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          // ...
        });
    }

    function logout() {
      firebase.analytics().logEvent('logout');
      fetch("./logout", {
        method: "GET",
      })
      .then(response => {
        window.location.href = "./";
      });
      sessionStorage.setItem("_session", "");
    }
  </script>
  <script src="./public/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>

</html>